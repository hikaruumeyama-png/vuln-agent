# ðŸ›¡ï¸ è„†å¼±æ€§ç®¡ç†AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

SIDfmã‹ã‚‰ã®è„†å¼±æ€§é€šçŸ¥ã‚’è‡ªå‹•å‡¦ç†ã—ã€SBOMã¨çªåˆã—ã¦æ‹…å½“è€…ã«é€šçŸ¥ã™ã‚‹AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã™ã€‚

## æ¦‚è¦

| é …ç›® | å†…å®¹ |
|------|------|
| ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | Google Cloud Vertex AI Agent Engine |
| ãƒ¢ãƒ‡ãƒ« | Gemini 2.5 Flash |
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Google ADK (Agent Development Kit) |

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Vertex AI Agent Engine                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Vulnerability Management Agent (gemini-2.5-flash) â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚   â”‚Gmail Toolsâ”‚  â”‚Sheets Toolâ”‚  â”‚Chat Tools â”‚        â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â–¼              â–¼              â–¼
        Gmail API     Google Sheets    Google Chat
        (SIDfmç›£è¦–)   (SBOM/æ‹…å½“è€…)    (é€šçŸ¥é€ä¿¡)
```

## æ©Ÿèƒ½

1. **è„†å¼±æ€§æ¤œçŸ¥** - SIDfmãƒ¡ãƒ¼ãƒ«ã®ç›£è¦–ã¨è§£æž
2. **å½±éŸ¿åˆ†æž** - SBOMã¨ã®çªåˆã§å½±éŸ¿ã‚·ã‚¹ãƒ†ãƒ ã‚’ç‰¹å®š
3. **æ‹…å½“è€…ç‰¹å®š** - ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒžãƒƒãƒãƒ³ã‚°ã§æ‹…å½“è€…ã‚’è‡ªå‹•ç‰¹å®š
4. **å„ªå…ˆåº¦åˆ¤å®š** - CVSSã‚¹ã‚³ã‚¢ã«åŸºã¥ãå„ªå…ˆåº¦æ±ºå®š
5. **æ‹…å½“è€…é€šçŸ¥** - Google Chatã§ã‚¢ãƒ©ãƒ¼ãƒˆé€ä¿¡

## è¿½åŠ æ§‹æˆï¼ˆéŸ³å£°/ãƒãƒ£ãƒƒãƒˆUIï¼‰

ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éŸ³å£°å¯¾è©±ã¨Webãƒãƒ£ãƒƒãƒˆUIã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®æ§‹æˆã‚’è¿½åŠ ã—ã¾ã™ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Web Client                             â”‚
â”‚   - text chat UI / mic capture (Barge-inå¯¾å¿œã®åœŸå°)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Live Gateway (Cloud Run)                      â”‚
â”‚   - Gemini Live API ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼ˆå®Ÿè£…äºˆå®šï¼‰                â”‚
â”‚   - Agent Engine ã¸ã®ãƒ†ã‚­ã‚¹ãƒˆå•ã„åˆã‚ã›                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ Vertex AI SDK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Vertex AI Agent Engine (æ—¢å­˜)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰
- Web UI + Live Gateway ã®æœ€å°æ§‹æˆ: `docs/LIVE_VOICE_SETUP.md`

## å‰ææ¡ä»¶

- Google Cloud ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆèª²é‡‘æœ‰åŠ¹ï¼‰
- Google Cloud ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- Cloud Shell ã¾ãŸã¯ gcloud CLI

---

## ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### Step 1: Google Cloud ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™

Cloud Shell ã‚’é–‹ã: https://console.cloud.google.com/
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã‚’è¨­å®šï¼ˆã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆIDã«ç½®ãæ›ãˆï¼‰
gcloud config set project YOUR_PROJECT_ID

# å¤‰æ•°ã«ä¿å­˜
PROJECT_ID=$(gcloud config get-value project)
echo "Project: $PROJECT_ID"
```

### Step 2: å¿…è¦ãªAPIã‚’æœ‰åŠ¹åŒ–
```bash
gcloud services enable \
    aiplatform.googleapis.com \
    gmail.googleapis.com \
    sheets.googleapis.com \
    chat.googleapis.com
```

### Step 3: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆ
```bash
gcloud storage buckets create gs://${PROJECT_ID}-agent-staging --location=asia-northeast1
```

### Step 4: ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
cd ~
git clone https://github.com/YOUR_USERNAME/vuln-agent-engine.git
cd vuln-agent-engine
```

### Step 5: Pythonç’°å¢ƒã‚’ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
python3 -m venv .venv
source .venv/bin/activate

pip install --upgrade pip
pip install google-adk
pip install "google-cloud-aiplatform[agent_engines,adk]"
pip install google-api-python-client google-auth packaging
```

### Step 6: ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’æº–å‚™

1. Google Sheets ã§æ–°è¦ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‚’ä½œæˆ
2. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆå: `è„†å¼±æ€§ç®¡ç†SBOM`ï¼ˆä»»æ„ï¼‰

#### ã‚·ãƒ¼ãƒˆ1: SBOM
ã‚·ãƒ¼ãƒˆåã‚’ `SBOM` ã«å¤‰æ›´ã—ã€ä»¥ä¸‹ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’1è¡Œç›®ã«å…¥åŠ›:

| A | B | C | D | E |
|---|---|---|---|---|
| type | name | version | release | purl |

ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼ˆ2è¡Œç›®ä»¥é™ï¼‰:
```
maven | log4j-core | 2.14.1 | 1 | pkg:maven/org.apache.logging.log4j/log4j-core@2.14.1
npm | lodash | 4.17.21 | | pkg:npm/lodash@4.17.21
```

#### ã‚·ãƒ¼ãƒˆ2: æ‹…å½“è€…ãƒžãƒƒãƒ”ãƒ³ã‚°
æ–°ã—ã„ã‚·ãƒ¼ãƒˆã‚’è¿½åŠ ã—ã€åå‰ã‚’ `æ‹…å½“è€…ãƒžãƒƒãƒ”ãƒ³ã‚°` ã«å¤‰æ›´:

| A | B | C | D | E |
|---|---|---|---|---|
| pattern | system_name | owner_email | owner_name | notes |

ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿:
```
pkg:maven/org.apache.logging.* | ãƒ­ã‚°åŸºç›¤ | your-email@example.com | æ‹…å½“å¤ªéƒŽ | Log4jç­‰
pkg:npm/* | Webãƒ•ãƒ­ãƒ³ãƒˆ | your-email@example.com | æ‹…å½“å¤ªéƒŽ | npmå…¨èˆ¬
* | ãã®ä»– | your-email@example.com | æ‹…å½“å¤ªéƒŽ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
```

#### ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆIDã‚’ãƒ¡ãƒ¢
URLã® `https://docs.google.com/spreadsheets/d/ã€ã“ã“ãŒIDã€‘/edit` éƒ¨åˆ†

#### ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’è¨­å®š
å…±æœ‰ â†’ ã€Œãƒªãƒ³ã‚¯ã‚’çŸ¥ã£ã¦ã„ã‚‹å…¨å“¡ã€â†’ã€Œé–²è¦§è€…ã€ã«è¨­å®š

### Step 7: ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
```bash
cd ~/vuln-agent-engine/agent

cat > .env << EOF
GMAIL_USER_EMAIL=your-email@example.com
SIDFM_SENDER_EMAIL=noreply@sidfm.com
SBOM_SPREADSHEET_ID=ã‚ãªãŸã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆID
SBOM_SHEET_NAME=SBOM
OWNER_SHEET_NAME=æ‹…å½“è€…ãƒžãƒƒãƒ”ãƒ³ã‚°
DEFAULT_CHAT_SPACE_ID=spaces/your-space-id
